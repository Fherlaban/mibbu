var p=void 0,mibbu=function(K,L,B){function q(){for(var c=n.length,e,d,f,h,i,b,a,C,D;c--;)for(e in d=n[c],h=d.c+d.e.A,i=d.c+d.height-d.e.q,b=d.b+d.e.u,d=d.b+d.width-d.e.w,n[c].t)if(f=E[e],a=f.c+f.e.A,C=f.c+f.height-f.e.q,D=f.b+f.e.u,f=f.b+f.width-f.e.w,!(h>C||i<a||b>f||d<D))n[c].t[e]()}function F(){G();for(var c=e.length;c--;)e[c].G();for(c=g.length;c--;)g[c]();if(s){c=+new Date;~~(c-v)>=1E3&&(H=w,w=0,v=c);c="FPS: "+H;if(i)l.fillText(c,4,15);else if(t)t.innerHTML=c;w++}x&&(I=J(F,h))}function M(){h=m.createElement("canvas");l=h.getContext("2d");l.g=l.drawImage;e.sort(function(c,e){return c.j-e.j})}function N(){G=i?function(){l.clearRect(0,0,y,z)}:function(){};s&&(v=new Date);J=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(c){setTimeout(c,1E3/60)}}();o=h.style;h.width=y;h.height=z;o.width=y+"px";o.height=z+"px";o.position="absolute";o.overflow="hidden";A.appendChild(h)}var i=!0,k=!1,m=document,e=[],A=B?m.getElementById(B):m.body,h,l,y=K||400,z=L||300,g=[],I,G,v=new Date,s=!1,t,n=[],E=[],J,o,u,j;Array.prototype.g=Array.prototype.indexOf||function(c){for(var e=this.length;e--&&this[e]!==c;);return e};var w=0,H=0,x=!0;m.createElement("canvas").getContext||(i=!1);return{fps:function(){s=!0},init:function(){i?M():(h=m.createElement("div"),s&&(t=m.createElement("div"),h.appendChild(t)));N()},on:function(){x=!0;F();if(k)for(var c=e.length;c--;)e[c].a&&(e[c].a.style[j+"AnimationDuration"]=~~(1/(60/e[c].f)*100)/100*(e[c].i+1)+"s")},off:function(){clearTimeout(I);x=!1;if(k)for(var c=e.length;c--;)e[c].a&&(e[c].a.style[j+"AnimationDuration"]=0)},canvas:function(){return h},ctx:function(){return l},canvasOff:function(){i=!1;typeof A.style.WebkitAnimation!=="undefined"?(u="-webkit-",j="Webkit",k=!0):typeof A.style.MozAnimation!=="undefined"&&(u="-moz-",j="Moz",k=!0)},cssAnimationOff:function(){k=!1},hitsOn:function(){g.g(q)===-1&&g.push(q)},hitsOff:function(){g.g(q)!==-1&&g.splice(g.g(q),1)},spr:function(c,g,d,f,o){function r(){for(var b="@"+u+"keyframes s"+a.id+" {\n",c=100/(a.i+1),e="% { "+u+"transform: translate(",d=0;d<a.i+1;d++)b+=~~(c*d*100)/100+e+a.k*a.width*-1+"px,"+d*a.height*-1+"px); }\n",b+=~~((c*(d+1)-0.01)*100)/100+e+a.k*a.width*-1+"px,"+d*a.height*-1+"px); }\n";return b+("100"+e+a.k*a.width+"px, 0px); }\n}")}var b=i?function(){try{l.g(a.a,a.F*a.k,a.D*a.n,a.F,a.D,a.b,a.c,a.width,a.height)}catch(b){}}:k?function(){}:function(){a.d.top=a.height*a.n*-1+"px";a.d.left=a.width*a.k*-1+"px"},a={};a.id=e.length;a.a=new Image;a.a.src=c;a.f=1;a.width=g;a.F=g;a.height=d;a.D=d;a.i=f;a.H=o;a.I=!1;a.t={};a.n=0;a.k=0;a.f=1;a.p=0;a.b=0;a.c=0;a.j=1;a.s=null;a.r=0;a.B=0;a.e={A:0,u:0,q:0,w:0};if(!i){a.C=m.createElement("div");a.h=a.C.style;a.h.overflow="hidden";a.h.width=g+"px";a.h.height=d+"px";a.h.position="absolute";a.h.zIndex=a.j;a.d=a.a.style;a.d.position="absolute";if(k)a.o=m.createElement("style"),a.o.innerHTML=r(),m.body.appendChild(a.o),a.d[j+"Animation"]="s"+a.id+" "+~~(1/(60/a.f)*100)/100*(a.i+1)+"s linear 0s infinite";a.C.appendChild(a.a);h.appendChild(a.C)}a.id=e.push(a)-1;E.push(a);a.G=function(){if(a.i>0){if(a.p==a.f&&a.f!==0){if(a.n==a.i){if(a.n=0,typeof a.s==="function"&&(a.r++,a.r===a.B))a.s(),a.r=0}else a.n++;a.p=0}a.f!==0&&a.p++;b()}};return{position:function(b,c,d){a.b=b||a.b;a.c=c||a.c;a.j=d||a.j;i?d&&e.sort(function(a,b){return b.j-a.j}):(a.h.left=b+"px",a.h.top=c+"px",a.h.zIndex=d||a.j);return{x:a.b,y:a.c,J:a.j}},hit:function(b,c){n.g(a)===-1&&n.push(a);a.t[b.id()]=c;n.g(a)===-1&&n.push(a)},zone:function(b,c,d,e){if(b!==p)a.e.u=e,a.e.A=b,a.e.w=c,a.e.q=d;return a.e},noHits:function(){a.t={}},callback:function(b,c){a.s=b;a.B=c},change:function(b,c,d,e,f){a.a.src=b;a.width=c;a.height=d;a.F=c;a.D=d;a.i=e;a.k=f;a.p=0;a.n=0;a.s=null;a.r=0;a.B=0;if(!i&&(a.d.width=c*(a.k+1)+"px",a.d.height=d*(a.i+1)+"px",a.h.width=c+"px",a.h.height=d+"px",k))a.d[j+"AnimationName"]="",a.o.innerHTML=r(),a.d[j+"AnimationName"]="s"+a.id;a.e={A:0,u:0,q:0,w:0}},size:function(b,c){if(b!==p){if(!i)a.h.width=b+"px",a.h.height=c+"px",a.d.width=b*(a.H+1)+"px",a.d.height=c*(a.i+1)+"px";a.width=b;a.height=c;if(k)a.d[j+"AnimationName"]="",a.o.innerHTML=r(),a.d[j+"AnimationName"]="s"+a.id}return{width:a.width,height:a.height}},speed:function(b){if(b!==p)a.f=b,a.p=0,k&&(a.d[j+"AnimationDuration"]=~~(1/(60/b)*100)/100*(a.i+1)+"s");return a.f},animation:function(b){if(b!==p&&(a.k=b,k))a.d[j+"AnimationName"]="",a.o.innerHTML=r(),a.d[j+"AnimationName"]="s"+a.id;return a.k},frame:function(b){if(b!==p)a.n=b;return a.n},id:function(){return a.id}}},bg:function(c,g,d,f){function j(a){switch(a){case "N":b.l=0;b.m=-1;break;case "W":b.l=-1;b.m=0;break;case "S":b.l=0;b.m=1;break;case "E":b.l=1;b.m=0;break;default:b.l=0,b.m=0}}var k=i?function(){try{l.g(b.a,b.b,b.c),l.g(b.a,b.b+b.a.width*b.l,b.c+b.a.height*b.m),l.g(b.a,b.b-b.a.width*b.l,b.c-b.a.height*b.m)}catch(a){}if(b.l===-1){if(b.b<b.a.width*-1)b.b=0}else if(b.l===1){if(b.b>b.a.width)b.b=0}else if(b.m===-1){if(b.c<b.a.height*-1)b.c=0}else if(b.m===1&&b.c>b.a.height)b.c=0}:function(){h.style.backgroundPosition=b.b+"px "+b.c+"px"},b=this;i?(b.a=new Image,b.a.src=c):h.style.backgroundImage="url("+c+")";b.f=g||3;j(d);b.j=f.z||0;b.b=f.x||0;b.c=f.y||0;b.id=e.push(b);b.v=0;b.G=function(){b.b+=b.f*b.l*b.v;b.c+=b.f*b.m*b.v;k()};return{on:function(){b.v=1},off:function(){b.v=0},dir:function(a){b.b=b.c=0;j(a)},speed:function(a){if(a!==p)b.f=a;return b.f},position:function(a,c){b.b=a||b.b;b.c=c||b.c;return{x:b.b,y:b.c}}}},hook:function(c){g.push(c)},unhook:function(c){g.g(c)!==-1&&g.splice(g.g(c),1)}}};