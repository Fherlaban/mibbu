var o=void 0,mibbu=function(H,I,x){function p(){for(var b=j.length,e,c,d,f,i,a,h,y,z;b--;)for(e in c=j[b],f=c.c+c.d.t,i=c.c+c.height-c.d.n,a=c.b+c.d.q,c=c.b+c.width-c.d.s,j[b].o)if(d=A[e],h=d.c+d.d.t,y=d.c+d.height-d.d.n,z=d.b+d.d.q,d=d.b+d.width-d.d.s,!(f>y||i<h||a>d||c<z))j[b].o[e]()}function B(){C();for(var b=l.length;b--;)l[b].F();for(b=g.length;b--;)g[b]();if(q){b=new Date;~~(b.getTime()-s.getTime())>=1E3&&(D=t,t=0,s=b);b="FPS: "+D;if(i)k.fillText(b,4,15);else if(r)r.innerHTML=b;t++}u&&(E=F(B,f))}function J(){f=m.createElement("canvas");G();k=f.getContext("2d");k.p=k.drawImage;l.sort(function(b,e){return b.g-e.g})}function G(){C=i?function(){k.clearRect(0,0,v,w)}:function(){};q&&(s=new Date);F=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(b){setTimeout(b,1E3/60)}}();n=f.style;f.width=v;f.height=w;n.width=v+"px";n.height=w+"px";n.position="absolute";n.overflow="hidden";K.appendChild(f)}var i=!0,m=document,l=[],K=x?m.getElementById(x):m.body,f,n=null,k,v=H||400,w=I||300,g=[],E,C,s=new Date,q=!1,r,j=[],A=[],F;if(!Array.indexOf)Array.prototype.indexOf=function(b){var e;for(e=0;e<this.length;e++)if(this[e]===b)return e;return-1};var t=0,D=0,u=!0;m.createElement("canvas").getContext||(i=!1);return{fps:function(){q=!0},init:function(){i?J():(f=m.createElement("div"),G(),q&&(r=m.createElement("div"),f.appendChild(r)))},on:function(){u=!0;B()},off:function(){clearTimeout(E);u=!1},canvas:function(){return f},ctx:function(){return k},canvasOff:function(){i=!1},hitsOn:function(){g.indexOf(p)===-1&&g.push(p)},hitsOff:function(){g.indexOf(p)!==-1&&g.splice(g.indexOf(p),1)},spr:function(b,e,c,d,g){var n=i?function(){try{k.p(a.a,a.C*a.m,a.B*a.j,a.C,a.B,a.b,a.c,a.width,a.height)}catch(h){}}:function(){a.a.style.top=a.height*a.j*-1+"px";a.a.style.left=a.width*a.m*-1+"px"},a={};a.id=l.length;a.a=new Image;a.a.src=b;a.f=1;a.width=e;a.C=e;a.height=c;a.B=c;a.k=d;a.u=g;a.G=!1;a.o={};a.j=0;a.m=0;a.f=1;a.l=0;a.b=0;a.c=0;a.g=1;a.w=null;a.v=0;a.D=0;a.d={t:0,q:0,n:0,s:0};if(!i)a.A=m.createElement("div"),a.e=a.A.style,a.e.overflow="hidden",a.e.width=e+"px",a.e.height=c+"px",a.e.position="absolute",a.e.zIndex=a.g,a.a.style.position="absolute",a.A.appendChild(a.a),f.appendChild(a.A);a.id=l.push(a)-1;A.push(a);a.F=function(){if(a.k>0){if(a.l==a.f&&a.f!==0){if(a.j==a.k){if(a.j=0,typeof a.w==="function"&&(a.v++,a.v===a.D))a.w(),a.v=0}else a.j++;a.l=0}a.f!==0&&a.l++;n()}};return{position:function(h,b,c){a.b=h||a.b;a.c=b||a.c;a.g=c||a.g;i?c&&l.sort(function(a,h){return h.g-a.g}):(a.e.left=h+"px",a.e.top=b+"px",a.e.zIndex=c||a.g);return{x:a.b,y:a.c,H:a.g}},hit:function(h,b){j.indexOf(a)===-1&&j.push(a);a.o[h.id()]=b;j.indexOf(a)===-1&&j.push(a)},zone:function(h,b,c,d){if(h!==o)a.d.q=d,a.d.t=h,a.d.s=b,a.d.n=c;return a.d},noHits:function(){a.o={}},callback:function(h,b){a.w=h;a.D=b},change:function(b,c,d,e,f){a.a.src=b;a.width=c;a.height=d;a.C=c;a.B=d;a.k=e;a.u=f;a.l=0;a.j=0;if(!i)a.a.style.width=c*(a.u+1)+"px",a.a.style.height=d*(a.k+1)+"px",a.e.width=c+"px",a.e.height=d+"px";a.d={t:0,q:0,n:0,s:0}},size:function(b,c){if(b!==o){if(!i)a.e.width=b+"px",a.e.height=c+"px",a.a.style.width=b*(a.u+1)+"px",a.a.style.height=c*(a.k+1)+"px";a.width=b;a.height=c}return{width:a.width,height:a.height}},speed:function(b){if(b!==o)a.f=b,a.l=0;return a.f},animation:function(b){if(b!==o)a.m=b;return a.m},frame:function(b){if(b!==o)a.j=b;return a.j},id:function(){return a.id}}},bg:function(b,e,c,d){function g(b){switch(b){case "N":a.h=0;a.i=-1;break;case "W":a.h=-1;a.i=0;break;case "S":a.h=0;a.i=1;break;case "E":a.h=1;a.i=0;break;default:a.h=0,a.i=0}}var j=i?function(){try{k.p(a.a,a.b,a.c),k.p(a.a,a.b+a.a.width*a.h,a.c+a.a.height*a.i),k.p(a.a,a.b-a.a.width*a.h,a.c-a.a.height*a.i)}catch(b){}if(a.h===-1){if(a.b<a.a.width*-1)a.b=0}else if(a.h===1){if(a.b>a.a.width)a.b=0}else if(a.i===-1){if(a.c<a.a.height*-1)a.c=0}else if(a.i===1&&a.c>a.a.height)a.c=0}:function(){f.style.backgroundPosition=a.b+"px "+a.c+"px"},a=this;i?(a.a=new Image,a.a.src=b):f.style.backgroundImage="url("+b+")";a.f=e||3;g(c);a.g=d.z||0;a.b=d.x||0;a.c=d.y||0;a.id=l.push(a);a.r=0;a.F=function(){a.b+=a.f*a.h*a.r;a.c+=a.f*a.i*a.r;j()};return{on:function(){a.r=1},off:function(){a.r=0},dir:function(b){a.b=a.c=0;g(b)},speed:function(b){if(b!==o)a.f=b;return a.f},position:function(b,c){a.b=b||a.b;a.c=c||a.c;return{x:a.b,y:a.c}}}},hook:function(b){g.push(b)},unhook:function(b){g.indexOf(b)!==-1&&g.splice(g.indexOf(b),1)}}};